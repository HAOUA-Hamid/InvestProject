<app-header userName="hamid" userRole="investor"></app-header>
<div class="card">
  <h2>Investment Opportunities</h2>
  <p-table [value]="projects" [tableStyle]="{'min-width': '60rem'}">
    <ng-template pTemplate="header">
      <tr>
        <th>Project Name</th>
        <th>Category</th>
        <th>Funding Progress</th>
        <th>Risk Level</th>
        <th>Rating</th>
        <th>Action</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-project>
      <tr>
        <td>
          <span class="font-bold">{{ project.name }}</span>
          <br>
          <small class="text-500">{{ project.description }}</small>
        </td>
        <td>{{ project.category }}</td>
        <td>
          <div class="flex align-items-center gap-2">
            <div class="w-full bg-gray-200 rounded">
              <div class="bg-primary p-1 text-white font-bold text-center rounded"
                   [style.width.%]="calculateProgress(project.currentFunding, project.fundingGoal)">
                {{ calculateProgress(project.currentFunding, project.fundingGoal).toFixed(0) }}%
              </div>
            </div>
          </div>
          <small class="text-500">
            {{ formatCurrency(project.currentFunding) }} of {{ formatCurrency(project.fundingGoal) }}
          </small>
        </td>
        <td>
          <p-tag [value]="project.riskLevel" [severity]="getSeverity(project.riskLevel)"></p-tag>
        </td>
        <td>
          <p-rating [ngModel]="project.rating" [readonly]="true" [cancel]="false"></p-rating>
        </td>
        <td>
          <p-button label="Invest" icon="pi pi-dollar" styleClass="p-button-sm"></p-button>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>
